# 🎵 音乐格式转换器

一个现代化的音乐格式转换工具，支持批量文件夹转换和单个文件转换，提供图形化界面。

## ✨ 功能特性

- **现代化界面**: 深色主题，美观易用
- **批量转换**: 一键转换整个文件夹的所有音乐文件
- **单文件转换**: 支持单独转换指定的音乐文件
- **多格式支持**: 支持 MP3, WAV, FLAC, AAC, OGG, M4A 等格式
- **实时进度**: 显示转换进度和状态信息
- **操作日志**: 详细记录所有操作和错误信息
- **线程安全**: 转换过程在后台线程运行，界面不会卡顿

## 📋 支持的格式

### 输入格式
- MP3
- WAV
- FLAC
- AAC
- M4A
- OGG
- WMA
- APE
- TTA

### 输出格式
- MP3
- WAV
- FLAC
- AAC
- OGG
- M4A

## 🚀 快速开始

### 1. 环境准备

首先确保系统已安装 **ffmpeg**：

**Windows:**
```bash
# 下载 ffmpeg: https://ffmpeg.org/download.html
# 解压并添加到系统 PATH 环境变量
```

**macOS:**
```bash
brew install ffmpeg
```

**Linux (Ubuntu/Debian):**
```bash
sudo apt-get update
sudo apt-get install ffmpeg
```

### 2. 安装依赖

使用 uv 安装 Python 依赖：

```bash
# 进入项目目录
cd music_converter

# 安装依赖
uv pip install -r requirements.txt
```

或者使用 pip：

```bash
pip install -r requirements.txt
```

### 3. 运行程序

```bash
python main.py
```

## 📖 使用说明

### 界面介绍

1. **输入选择区域**
   - 选择音乐文件：可选择多个音乐文件
   - 选择音乐文件夹：自动扫描文件夹内所有支持的音频文件
   - 显示已选择的路径列表

2. **输出设置区域**
   - 输出格式：从下拉菜单选择目标格式
   - 输出目录：可自定义，留空则使用默认目录

3. **转换控制区域**
   - 开始转换：开始执行转换任务
   - 停止：停止当前转换任务
   - 清空选择：清空所有选择和设置

4. **进度显示区域**
   - 进度条：显示当前转换进度
   - 状态标签：显示当前操作状态

5. **操作日志区域**
   - 详细记录所有操作、状态和错误信息

### 转换模式

#### 单文件转换
1. 点击"选择音乐文件"按钮
2. 选择一个或多个音乐文件
3. 选择输出格式
4. 点击"开始转换"

#### 批量转换
1. 点击"选择音乐文件夹"按钮
2. 选择包含音乐文件的文件夹
3. 选择输出格式
4. （可选）设置输出目录
5. 点击"开始转换"

### 输出目录说明

- **默认行为**: 如果不指定输出目录，批量转换会在原文件夹下创建 `converted` 子文件夹
- **自定义目录**: 指定输出目录后，所有转换文件将保存到该目录
- **单文件转换**: 默认在原文件所在目录生成转换后的文件

## 🔧 技术架构

### 核心组件

- **main.py**: 程序入口，负责启动应用
- **converter.py**: 核心转换逻辑，使用 pydub 和 ffmpeg
- **ui.py**: 现代化界面，使用 PyQt6

### 依赖说明

- **PyQt6**: GUI 框架，提供现代化界面
- **pydub**: 音频处理库，简化音频操作
- **ffmpeg-python**: ffmpeg 的 Python 绑定，提供强大的音频处理能力

## ⚠️ 注意事项

1. **文件覆盖**: 如果输出文件已存在，程序会自动在文件名后添加 "_converted" 避免覆盖
2. **大文件处理**: 大文件转换可能需要较长时间，请耐心等待
3. **格式兼容**: 某些特殊格式可能需要额外的编码器支持
4. **内存使用**: 批量转换大量文件时会占用较多内存

## 🐛 常见问题

**Q: 转换失败，提示 "无法解码文件"**
A: 可能是文件损坏或格式不支持，请检查文件完整性

**Q: 程序界面无法启动**
A: 确保已正确安装 PyQt6 和相关依赖

**Q: 转换速度很慢**
A: 大文件转换需要时间，这是正常现象。可以在任务管理器中查看 CPU 使用率

**Q: 找不到 ffmpeg**
A: 确保 ffmpeg 已正确安装并添加到系统 PATH

## 📝 更新日志

### v1.0.0
- ✨ 基础功能完成
- ✨ 现代化深色界面
- ✨ 支持批量和单文件转换
- ✨ 实时进度显示
- ✨ 详细操作日志

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

---

**开发**: xiaomimimo,cline
**版本**: 1.0.0  
**最后更新**: 2026-01-14
